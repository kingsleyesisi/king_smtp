===============================================================================
CLOUDFLARE DNS SETUP FOR benefitsmart.xyz
===============================================================================

⚠️ IMPORTANT: Your server IP is 44.221.51.204 (not the Elastic IP)
   Use this IP in all DNS records below!

===============================================================================
HOW TO ADD DNS RECORDS IN CLOUDFLARE
===============================================================================

1. Go to: https://dash.cloudflare.com
2. Select your domain: benefitsmart.xyz
3. Click on "DNS" tab (left sidebar)
4. Click "Add record" for each record below

===============================================================================
RECORD 1: A Record (Mail Server)
===============================================================================
Click "Add record"
- Type: A
- Name: mail.benefitsmart.xyz (or just "mail")
- IPv4 address: 44.221.51.204
- Proxy status: DNS only (turn OFF the orange cloud ☁️ - click to make it gray)
- TTL: Auto
- Click "Save"

===============================================================================
RECORD 2: MX Record (Mail Exchanger)
===============================================================================
Click "Add record"
- Type: MX
- Name: @ (or leave blank or "benefitsmart.xyz")
- Mail server: mail.benefitsmart.xyz
- Priority: 10
- TTL: Auto
- Click "Save"

===============================================================================
RECORD 3: SPF Record (TXT)
===============================================================================
Click "Add record"
- Type: TXT
- Name: @ (or leave blank or "benefitsmart.xyz")
- Content: v=spf1 mx ip4:44.221.51.204 ~all
  (Copy exactly, NO quotes needed in Cloudflare)
- TTL: Auto
- Click "Save"

===============================================================================
RECORD 4: DKIM Record (TXT) ⚠️ IMPORTANT - LONG VALUE
===============================================================================
Click "Add record"
- Type: TXT
- Name: default._domainkey (or "default._domainkey.benefitsmart.xyz")
- Content: v=DKIM1; k=rsa; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAx4wqgX2+ej++qgnlNe81/hMaCnn0arMe9U740fKahKKrPZc+FqMtKR61FAHGC3kQaiJoGm2zQtF6GNeEWgRLgpquHuxD2aA+2fC3LOr0ze4G9D5frasRaMxEZZXxhmllCyECrpNy+zMSThb1v6QNC9T4jGPuPFPM6/lXtKLARiKL57tekRdHPNjMliTuZYNzARqN5LtiAhmHxG
  (Copy the ENTIRE line above, NO quotes needed)
- TTL: Auto
- Click "Save"

⚠️ NOTE: The DKIM value appears cut off above - it's incomplete in the output.
         Run this command on your server to get the FULL DKIM key:
         sudo cat /etc/opendkim/keys/benefitsmart.xyz/default.txt

===============================================================================
RECORD 5: DMARC Record (TXT)
===============================================================================
Click "Add record"
- Type: TXT
- Name: _dmarc (or "_dmarc.benefitsmart.xyz")
- Content: v=DMARC1; p=quarantine; rua=mailto:admin@benefitsmart.xyz
  (NO quotes needed)
- TTL: Auto
- Click "Save"

===============================================================================
RECORD 6: PTR (Reverse DNS) - AWS EC2 Console (NOT Cloudflare)
===============================================================================
You MUST configure this in AWS:

1. Go to AWS EC2 Console: https://console.aws.amazon.com/ec2/
2. Click "Elastic IPs" in left sidebar
3. Find your IP: 44.221.51.204
4. Select it (checkbox)
5. Click "Actions" → "Update reverse DNS"
6. Enter: mail.benefitsmart.xyz
7. Click "Update"

This is CRITICAL for email delivery!

===============================================================================
VERIFICATION (Wait 5-60 minutes after adding records)
===============================================================================

Run these commands on your server to verify:

# Check A Record
dig mail.benefitsmart.xyz +short
# Should return: 44.221.51.204

# Check MX Record
dig benefitsmart.xyz MX +short
# Should return: 10 mail.benefitsmart.xyz.

# Check SPF
dig benefitsmart.xyz TXT +short | grep spf

# Check DKIM
dig default._domainkey.benefitsmart.xyz TXT +short

# Check DMARC
dig _dmarc.benefitsmart.xyz TXT +short

# Check PTR (reverse DNS)
dig -x 44.221.51.204 +short
# Should return: mail.benefitsmart.xyz.

===============================================================================
YOUR SMTP CREDENTIALS
===============================================================================
Email:     admin@benefitsmart.xyz
Password:  Kingsley419.
Host:      mail.benefitsmart.xyz
Port:      587
Encryption: STARTTLS

===============================================================================
TEST EMAIL AFTER DNS PROPAGATION
===============================================================================

On your server, run:
sudo bash scripts/test-email.sh

This will send a test email to: kingsleyesisi1@gmail.com

Check:
1. Inbox (if everything is configured correctly)
2. Spam/Junk folder
3. Server logs: sudo tail -f /var/log/mail.log

===============================================================================
